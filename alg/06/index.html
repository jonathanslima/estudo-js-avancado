<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Anagrams</title>
</head>
<body>
  <h1>6. Anagrams</h1>
  <p>Ver console</p>

  <script>
    let removeEspacos = function(inp){
      return inp.replace(/\s/gi, '')
    };

    let input1 = removeEspacos('vida louca vida, vida breve já que eu não posso').split(''),
        input2 = removeEspacos('louca vida vida, breve vida já posso eu que não').split(''),
        mapInput1 = {}, mapInput2 = {}, arrInput1 = [], arrInput2 = [], count = 0;

    let mapInputs = (input, obj)=> {
      for(letra in input){
        obj[input[letra]] = obj[input[letra]] ? obj[input[letra]] + 1 : 1;
      }
    };

    let transformaEmArray = (arrInput, mapInput)=> {
      for (var letra in mapInput) {
        arrInput.push([letra, mapInput[letra]]);
      }
    };

    let ordenaArrays = (arrInput)=> {
      arrInput.sort((a, b)=> {
        return b[1] - a[1]
      });
    }

    let anagrams = (input1, input2)=> {

      if(input1.length !== input2.length){
        return console.log('As frases não são um anagrama')
      }

      // Cria o mapa das strings
      mapInputs(input1, mapInput1);
      mapInputs(input2, mapInput2);

      // Transforma em Array
      transformaEmArray(arrInput1, mapInput1);
      transformaEmArray(arrInput2, mapInput2);

      // Ordena
      ordenaArrays(arrInput1);
      ordenaArrays(arrInput2);

      // console.log(arrInput1, arrInput2)
      arrInput1.map((objItem, index)=> {
        for(let i in arrInput2){
          if(objItem[0] == arrInput2[i][0] && objItem[1] == arrInput2[i][1]){
            count++;
          }
        }
      })

      if(count === arrInput1.length) return console.log('As duas frases/ palavras consistem em um anagrama');
      return console.log('As frases não são um anagrama');
    };

    // Compara anagrama
    anagrams(input1, input2);
  </script>
</body>
</html>
